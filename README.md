### Команда для симфоні
## Задача
Напишіть Symfony-консольну команду, яка отримує курси валют з приватбанку та монобанку, а потім перевіряє, чи вони змінилися на більшу або меншу величину, ніж заданий трешхолд. Якщо це так, відправте повідомлення (наприклад, SMS або електронний лист) з інформацією про зміну курсу.
## Встановлення та вимоги
На вашому компі повинно бути встановлено docker. Качаємо проект в локальну папку і запускаємо команду
```
docker-compose up -d --build
```
Ця команда білдить 3 докер контейнера 
- db - база даних - використовуться для зберігання поточних курсів валют і трешхолдів. Разом з базою буде створена
порожня БД **db**.
- mailhog - використовується для того, щоб відловлювати і переглядати надіслані імейли. По суті потрібен для тестування.
- fpm - тут безпосередньо запускаються всі PHP скрипти

Після цього запустіть запустіть композер, щоб встановит всі необхідні залежності
```
RUN php composer install
```
А також запустіть міграції, щоб постворювати таблички в БД
```
RUN php /var/www/html/bin/console doctrine:migrations:migrate
```
## Встановлення трешхолдів
В завданні не було вказано як саме треба додавати трешхолди, тому щоб не підключати апач чи енджинкс контейнер я вирішив
додати консольну команду, за допомогою якої можна додавати нові трешхолди.
В контейнері fpm потрібно виконати наступну команду
```
php bin/console app:threshold-upsert USD 1.555
```
Перший параметр команди - це валюта (USD), що повинна складитись з трьох букв латинського алфавіту, 
а другий - сам трешхолд. Він повинен бути невідємним дробовим числом. Валідації тут не додано, тому що це не було 
пріоритетом. Список доступних валют є у файлі `config/currencies.json`.
Сам трешхолд встановлюється у абсолютному, а не процентному значенні, оскільки це не було деталізовано в завданні.
Це значить, що якщо трешхолд 1.555 - то зміна курсу валют не повинна перевищувати одну гривню і 55.5 копійок.
## Команда
Команда запускається наступним чином
```
php bin/console app:exchange-rate-watcher
```
При першому запуску команда додасть початкові значення в БД. Наприклад

| id | rate    | update_date         | currency |
|----|---------|---------------------|----------|
| 1  | 38.785  | 2024-03-17 14:24:55 | USD      |
| 2  | 42.3252 | 2024-03-17 14:24:55 | EUR      |
Команда додасть тільки ті значення, для яких задані трешхолди. Джерелом даних є Опен АПІ від монобанку. Але система
побудована з урахванням того, що можливе інше джерело даних. Для цього був створений інтерфейс **BankInterface**.

При наступному запуску команди, вона отримує дані про обмін валют і порівнює їх з існуючими. 
Монобанк заявляє, що зміна курсу валют у них відбувається раз у 5 хвилин. Щоб вам не витрачати
час і не чекати 5 хв, можна зайти в БД і змінити курси валют на більші чи менші.
Після цього запустіть команду знову. Якщо умова виконується, то симфоні надішле імейл листа зі вказаними змінами.
Для перевірки імейлу я додав контейнер mailhog. Він отримує надіслані імейли та має зручни інтерфейс для їх перегляду.
Для того, щоб переглядати імейли в вашому браузері наберіть [http://localhost:8025/](http://localhost:8025/).

## Тестування
Я створив декілька юніт тестів, щоб покрити існуючий функціонал. На мій погляд така кількість тестів є достатньою, 
але якщо мати сильно велике бажання, то можна додати більше.
Щоб запустити тести, необхідно запустити команду
```
php bin/phpunit tests
```